# === PolicyCortex - Example Environment (copy to .env and fill) ===
# Runtime mode
NEXT_PUBLIC_DEMO_MODE=false
USE_REAL_DATA=true
# Frontend hits the Gateway (which enforces JWT/RBAC and proxies to services)
NEXT_PUBLIC_REAL_API_BASE=http://localhost:8000
PORT=8084

# Azure (Entra ID)
AZURE_TENANT_ID=your-tenant-id
AZURE_SUBSCRIPTION_ID=your-subscription-id
AZURE_CLIENT_ID=your-client-id
AZURE_CLIENT_SECRET=your-client-secret

# ML Service Configuration
SAVINGS_RATE=0.10
DEFAULT_FIX_REPO=org/infrastructure
ML_PREDICT_URL=http://localhost:8001/predict
ML_EXPLAIN_URL=http://localhost:8002/explain

# Data stores
DATABASE_URL=postgres://pcx:pcx@localhost:5432/pcx
REDIS_URL=redis://localhost:6379

# Performance / limits
DB_POOL_SIZE=20
RATELIMIT_WINDOW_SEC=60
RATE_LIMIT_USER_PER_MIN=120
RATE_LIMIT_TENANT_PER_MIN=1200
AZURE_CACHE_TTL_SEC=600
PREDICTIONS_CACHE_TTL_SEC=120

# Auth (OIDC/JWT via Azure AD)
JWT_ISSUER=https://login.microsoftonline.com/<tenant-id>/v2.0
JWT_AUDIENCE=<your-app-client-id>
JWT_JWKS_URL=https://login.microsoftonline.com/<tenant-id>/discovery/v2.0/keys
# Map Azure AD group IDs to roles (comma-separated GUIDs)
ADMIN_GROUP_IDS=<guid1>,<guid2>
AUDITOR_GROUP_IDS=<guid3>
OPERATOR_GROUP_IDS=<guid4>

# Gateway â†’ service targets
GATEWAY_PORT=8000
CORE_URL=http://localhost:8081
AZURE_AGENTS_URL=http://localhost:8084

# Observability (Prometheus scrape targets; no auth for local only)
# Exposes /metrics on gateway/core/agents  
PROM_ENABLE_DEFAULT_METRICS=true
PROM_METRICS_REGISTER_DEFAULT=true
TRACE_SAMPLE=1   # 1=sample, 0=off

# GitHub App (for Auto-Fix PRs)
GITHUB_APP_ID=
GITHUB_INSTALLATION_ID=
GITHUB_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----"

# JWT (Auth)
JWT_ISSUER=
JWT_AUDIENCE=
JWT_JWKS_URL=

# Public app branding
NEXT_PUBLIC_APP_NAME=PolicyCortex